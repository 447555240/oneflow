include(ExternalProject)
set(CARES_TAR_URL https://github.com/c-ares/c-ares/releases/download/cares-1_15_0/c-ares-1.15.0.tar.gz)
set(CARES_URL_HASH d2391da274653f7643270623e822dff7)
set(CARES_INSTALL ${THIRD_PARTY_DIR}/cares)
SET(CARES_SOURCE_DIR ${THIRD_PARTY_SUBMODULE_DIR}/cares)

list(APPEND CARES_LIBRARIES ${ZLIB_LIBRARY_DIR}/libcares.so)

ExternalProject_Add(cares
  PREFIX ${CARES_SOURCE_DIR}
  URL ${CARES_TAR_URL}
  URL_HASH MD5=${CARES_URL_HASH}
  UPDATE_COMMAND ""
  INSTALL_DIR ${CARES_INSTALL}
  CMAKE_CACHE_ARGS
      -DCMAKE_BUILD_TYPE:STRING=${CMAKE_BUILD_TYPE}
      -DCMAKE_INSTALL_PREFIX:STRING=${CARES_INSTALL}
      -DCMAKE_CXX_FLAGS_DEBUG:STRING=${CMAKE_CXX_FLAGS_DEBUG}
)
