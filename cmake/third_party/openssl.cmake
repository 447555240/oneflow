include (ExternalProject)

set(OPENSSL_INCLUDE_DIR ${THIRD_PARTY_DIR}/OPENSSL/include)
set(OPENSSL_LIBRARY_DIR ${THIRD_PARTY_DIR}/OPENSSL/lib)

set(OPENSSL_INCLUDE_DIRS ${CMAKE_CURRENT_BINARY_DIR}/OPENSSL/src/OPENSSL/include)
SET(OPENSSL_TAR_URL https://github.com/openssl/openssl/archive/openssl-3.0.0-alpha6.tar.gz)
set(OPENSSL_URL_HASH 200fec7b4b0b85036472d4916e5d9114)
set(OPENSSL_INSTALL ${THIRD_PARTY_DIR}/openssl)
SET(OPENSSL_SOURCE_DIR ${THIRD_PARTY_SUBMODULE_DIR}/openssl)

if(THIRD_PARTY)
ExternalProject_Add(openssl
  PREFIX ${OPENSSL_SOURCE_DIR}
  URL ${OPENSSL_TAR_URL}
  URL_HASH MD5=${OPENSSL_URL_HASH}
  UPDATE_COMMAND ""
  CONFIGURE_COMMAND ${OPENSSL_SOURCE_DIR}/src/openssl/config --prefix=${OPENSSL_INSTALL}
  # INSTALL_DIR ${OPENSSL_INSTALL}
  BUILD_COMMAND make && make install
  # CMAKE_CACHE_ARGS
  #     -DCMAKE_BUILD_TYPE:STRING=${CMAKE_BUILD_TYPE}
  #     -DCMAKE_INSTALL_PREFIX:STRING=${CARES_INSTALL}
  #     -DCMAKE_CXX_FLAGS_DEBUG:STRING=${CMAKE_CXX_FLAGS_DEBUG}
)
endif()